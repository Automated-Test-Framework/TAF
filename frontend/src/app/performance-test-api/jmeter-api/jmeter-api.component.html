<div class="container">
    <div id="myModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="close" (click)="closeModal()">&times;</span>
                <h2>Résultat des tests</h2>
            </div>
            <div class="modal-body">
                <div class="table-responsive">
                    <table id="result_table" class="table table-striped">
                        <thead style="background-color: bg;">
                            <tr>
                                <th>Data Type</th>
                                <th>Connect</th>
                                <th>Label</th>
                                <th>Thread Name</th>
                                <th>URL</th>
                                <th>Response Code</th>
                                <th>Latency</th>
                                <th>Timestamp</th>
                                <th>Elapsed</th>
                                <th>Success</th>
                                <th>Bytes</th>
                                <th>Response Message</th>
                                <th>Failure Message</th>
                                <th>Sent Bytes</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let result of testResults">

                                <td>{{ result.dataType }}</td>
                                <td>{{ result.connect }}</td>
                                <td>{{ result.label }}</td>
                                <td>{{ result.threadName }}</td>
                                <td>{{ result.url }}</td>
                                <td>{{ result.responseCode }}</td>
                                <td>{{ result.latency }}</td>
                                <td>{{ result.timestamp }}</td>
                                <td>{{ result.elapsed }}</td>
                                <td
                                    [style.background-color]="result.success === 'true' ? 'rgba(60, 179, 113, 0.3)' : 'rgba(255, 0, 0, 0.2)'">
                                    {{ result.success === 'true' ? 'Success' : 'Failed' }}
                                </td>

                                <td>{{ result.bytes }}</td>
                                <td>{{ result.responseMessage }}</td>
                                <td>{{ result.failureMessage }}</td>
                                <td>{{ result.sentBytes }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

            </div>
            <div class="modal-footer">
                <button mat-raised-button color="primary" (click)="closeModal()">Fermer</button>
            </div>
        </div>
    </div>

    <div class="sidebar">
        <div class="sidebar-content">
            <div class="sidebar-title">
                <h1>JMeter</h1>
            </div>
            <div class="description">
                <p>
                    Apache JMeter est un outil open-source de test de charge et de performance pour évaluer les
                    performances des applications web. Pour configurer un test avec JMeter, vous devez définir les
                    paramètres suivants :


                    <br><br><b>Nombre d'utilisateurs :</b> Le nombre d'utilisateurs simultanés, simulant des charges
                    réalistes pour évaluer les performances de l'application dans différentes conditions de trafic.
                    <br><br><b>Temps de montée :</b> Le temps nécessaire pour augmenter progressivement le nombre
                    d'utilisateurs simultanés.
                    <br><br><b>Durée du test :</b> La durée totale du test.
                    <br><br><b>Domaine :</b> Le domaine de l'application à tester.
                    <br><br><b>Port :</b> Le port à utiliser pour la connexion.
                    <br><br><b>Chemin :</b> Le chemin de l'URL après le domaine et le port.
                    etc.).
                    <br><br><b>Nombre de boucles :</b> Le nombre de fois que le test sera répété.
                    <br><br><b>Données :</b> Les données à inclure dans la requête.
                </p>
            </div>

        </div>
    </div>
    <div class="main">
        <div class="content">
            <form (ngSubmit)="onHttpSubmit()">
                <div class="form-title">
                    <h1>Configuration du test</h1>
                </div>
                <div class="row">
                    <div class="form-group">
                        <label for="nbThreads">Nombre d'utilisateurs</label>
                        <input type="text" class="form-control" [(ngModel)]="http_request.nbThreads" name="nbThreads"
                            placeholder="Exemple">
                    </div>
                    <div class="form-group">
                        <label for="rampTime">Temps de montée</label>
                        <input type="text" class="form-control" [(ngModel)]="http_request.rampTime" name="rampTime"
                            placeholder="Exemple">
                    </div>
                    <div class="form-group">
                        <label for="duration">Durée du test</label>
                        <input type="text" class="form-control" [(ngModel)]="http_request.duration" name="duration"
                            placeholder="Exemple">
                    </div>
                </div>
                <div class="row">
                    <div class="form-group">
                        <label for="domain">Domaine</label>
                        <input type="text" class="form-control" [(ngModel)]="http_request.domain" name="domain"
                            placeholder="Exemple">
                    </div>
                    <div class="form-group">
                        <label for="port">Port</label>
                        <input type="text" class="form-control" [(ngModel)]="http_request.port" name="port"
                            placeholder="Exemple">
                    </div>
                    <div class="form-group">
                        <label for="protocol">Protocole</label>
                        <input type="text" class="form-control" [(ngModel)]="http_request.protocol" name="protocol"
                            placeholder="Exemple">
                    </div>
                </div>
                <div class="row">
                    <div class="form-group">
                        <label for="path">Chemin</label>
                        <input type="text" class="form-control" [(ngModel)]="http_request.path" name="path"
                            placeholder="Exemple">
                    </div>

                    <div class="form-group typeRequete">
                        <label for="typeRequete">Type de requête</label>
                        <select class="form-control" id="typeRequete" [(ngModel)]="http_request.method"
                            name="methodType" aria-placeholder="GET, POST...">
                            <option disabled selected value="">GET, POST...</option>
                            <option>GET</option>
                            <option>POST</option>
                            <option>PUT</option>
                            <option>DELETE</option>
                            <option>PATCH</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="loop">Nombre de boucles</label>
                        <input type="text" class="form-control" [(ngModel)]="http_request.loop" name="loop"
                            placeholder="Exemple">
                    </div>
                </div>
                <div class="form-group">
                    <label for="data">Données</label>
                    <input type="text" class="form-control" [(ngModel)]="http_request.data" name="data"
                        placeholder="Exemple">
                </div>



                <div class="row button-row">
                    <button mat-raised-button class="test-button" color="primary"
                        (click)="onHttpSubmit()">Tester</button>
                </div>

            </form>

        </div>


        <div class="main">
            <div class="content">
                <form (ngSubmit)="onFtpSubmit()">
                    <div class="form-title">
                        <h1>Configuration du test</h1>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label for="nbThreads">Nombre d'utilisateurs</label>
                            <input type="text" class="form-control" [(ngModel)]="ftp_request.nbThreads" name="nbThreads"
                                placeholder="Exemple">
                        </div>
                        <div class="form-group">
                            <label for="rampTime">Temps de montée</label>
                            <input type="text" class="form-control" [(ngModel)]="ftp_request.rampTime" name="rampTime"
                                placeholder="Exemple">
                        </div>
                        <div class="form-group">
                            <label for="duration">Durée du test</label>
                            <input type="text" class="form-control" [(ngModel)]="ftp_request.duration" name="duration"
                                placeholder="Exemple">
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label for="domain">Domaine</label>
                            <input type="text" class="form-control" [(ngModel)]="ftp_request.domain" name="domain"
                                placeholder="Exemple">
                        </div>
                        <div class="form-group">
                            <label for="port">Port</label>
                            <input type="text" class="form-control" [(ngModel)]="ftp_request.port" name="port"
                                placeholder="Exemple">
                        </div>
                        <div class="form-group">
                            <label for="method">Type de requête</label>
                            <select class="form-control" id="typeRequete" [(ngModel)]="ftp_request.method"
                                name="methodType">
                                <option disabled selected value="">GET(Retrive), POST(Store)...</option>
                                <option>Retrive </option>
                                <option>Store</option>

                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label for="remotefile">Fichier distant</label>
                            <input type="text" class="form-control" [(ngModel)]="ftp_request.remotefile"
                                name="remotefile" placeholder="Exemple">
                        </div>
                        <div class="form-group">
                            <label for="localfile">Fichier local</label>
                            <input type="text" class="form-control" [(ngModel)]="ftp_request.localfile" name="localfile"
                                placeholder="Exemple">
                        </div>
                        <div class="form-group">
                            <label for="username">Nom d'utilisateur</label>
                            <input type="text" class="form-control" [(ngModel)]="ftp_request.username" name="username"
                                placeholder="Exemple">
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label for="password">Mot de passe</label>
                            <input type="password" class="form-control" [(ngModel)]="ftp_request.password"
                                name="password" placeholder="Exemple">
                        </div>
                        <div class="form-group">
                            <label for="loop">Nombre de boucles</label>
                            <input type="text" class="form-control" [(ngModel)]="ftp_request.loop" name="loop"
                                placeholder="Exemple">
                        </div>
                    </div>


                    <!-- Remove unused fields related to Gatling -->

                    <div class="row button-row">
                        <button mat-raised-button class="test-button" color="primary"
                            (click)="onFtpSubmit()">Tester</button>
                    </div>
                </form>
            </div>
        </div>

    </div>